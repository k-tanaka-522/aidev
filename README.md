# AI Development Facilitator

**Claude Code環境専用**のAI開発ファシリテーターです。AIとの対話を通じてシステム開発プロセス全体を支援します。

## 概要

このプロジェクトは、**VSCode + Claude Code拡張機能**上で動作するAIファシリテーターです。エンジニアから非エンジニアまで、誰でも自然言語での会話を通じてシステム開発を進められます。企画から要件定義、設計、実装、テスト、デプロイまでの全フェーズをサポートし、納品レベルのドキュメントとコードを生成します。

### 前提条件

- **VSCode** がインストールされていること
- **Claude Code拡張機能** がインストールされていること
- Git がインストールされていること（Windows Git Bashを推奨）

### 主な特徴

- **役割ベースサブエージェント**: PM（あなた）が専門サブエージェント（Consultant, Architect, Coder, QA, SRE）に作業を委譲
- **イテレーティブレビュープロセス**: PM内部レビュー + ユーザーフィードバックの2段階で品質を確保
- **対話型開発プロセス**: 一問一答形式で段階的に情報を収集
- **フェーズ管理**: 企画→要件定義→設計→実装→テスト→納品の各フェーズをガイド
- **ドキュメント自動生成**: 各フェーズで受託開発納品レベルのドキュメントを日本語で生成
- **技術標準の適用**: コード品質、安全性、一貫性を保証する標準を自動適用
- **ビジュアル対応**: Mermaid図などを使った視覚的なドキュメント
- **状態管理**: プロジェクトの進捗、タスク、決定事項を自動追跡

## クイックスタート

### パターンA: 新規プロジェクトとして開始

```bash
# 1. リポジトリをクローン
git clone https://github.com/k-tanaka-522/aidev.git my-project
cd my-project

# 2. 新規プロジェクト初期化スクリプトを実行（重要！）
# Windows
scripts\init-new-project.bat

# Mac/Linux
./scripts/init-new-project.sh

# 3. VSCodeで開く
code .

# 4. Claude Codeで /init コマンドを実行
/init
```

**重要**: ダウンロード後、必ず `init-new-project` スクリプトを実行してください。
これにより、aiDev自体のドキュメントが削除され、git履歴がクリーンになり、新規プロジェクトとして開始できます。

### パターンB: 既存プロジェクトに追加

既存のプロジェクトに `.claude/` 設定のみを追加する場合：

```bash
cd your-existing-project

# 一時的にclone
git clone https://github.com/k-tanaka-522/aidev.git .aidev-temp

# .claude/ ディレクトリをコピー
cp -r .aidev-temp/.claude .

# CLAUDE.md のテンプレートをコピー（プロジェクトメモリのエントリーポイント）
cp .claude/templates/CLAUDE.md.template CLAUDE.md

# CLAUDE.md を編集（プロジェクト名等を設定）
# {PROJECT_NAME} を実際のプロジェクト名に置換してください

# .gitignore をマージ（既存の.gitignoreがある場合は手動で調整）
cat .aidev-temp/.gitignore >> .gitignore

# 一時ディレクトリを削除
rm -rf .aidev-temp

# VSCodeで開く（既に開いている場合は再読み込み）
code .

# Claude Codeで /init コマンドを実行
/init
```

### 開発を開始

**まず `/init` コマンドを実行してから**、Claude Codeとの会話を始めてください：

```
/init
```

初期化が完了したら、プロジェクトの内容を伝えます：

```
新しいAWS環境を構築したいです
```

AIが自動的に以下を行います：
- 業種・業態・課題などビジネス背景をヒアリング
- 要件を整理して要件定義書を作成
- 設計を行い、設計書とMermaid図を生成
- IaCコード（Terraform/CloudFormation）を生成
- CI/CDパイプラインを設計・実装

## ディレクトリ構造

```
.
├── .claude/                    # Claude Code設定
│   ├── CLAUDE.md              # PM エージェント（メイン）
│   ├── agents/                # サブエージェント定義
│   │   ├── ORCHESTRATION_DESIGN.md  # オーケストレーション設計
│   │   ├── consultant/AGENT.md      # ビジネス分析（企画・要件定義）
│   │   ├── architect/AGENT.md       # システム設計（設計）
│   │   ├── coder/AGENT.md           # 実装（実装）
│   │   ├── qa/AGENT.md              # 品質保証（テスト）
│   │   └── sre/AGENT.md             # 運用・信頼性（実装・テスト・納品）
│   ├── commands/              # カスタムコマンド
│   │   ├── init.md           # /init - プロジェクト初期化（最初に実行）
│   │   ├── status.md         # /status - プロジェクト状況確認
│   │   └── next.md           # /next - 次のアクション提案
│   ├── helpers/               # ヘルパードキュメント
│   │   ├── state-manager.md               # 状態管理方法
│   │   ├── review-task-generator.md       # レビュータスク生成
│   │   ├── template-customization-helper.md  # テンプレートカスタマイズ
│   │   └── directory-structure-helper.md  # ディレクトリ構成決定
│   └── docs/
│       ├── 00_core-principles.md          # 核となる行動原則
│       ├── 10_facilitation/
│       │   ├── 11_decision-items.md      # フェーズごとの決定項目
│       │   ├── 15_document-generation-flow.md  # ドキュメント生成フロー
│       │   ├── 17_secrets-management-flow.md   # シークレット管理フロー
│       │   └── 18_best-practice-research-flow.md  # ベストプラクティス調査
│       ├── 30_templates/              # ドキュメントテンプレート
│       │   ├── 01_planning/          # 企画書テンプレート
│       │   ├── 02_requirements/      # 要件定義書テンプレート
│       │   └── 03_design/            # 設計書テンプレート
│       └── 40_standards/
│           ├── 41_common.md              # 共通技術標準
│           ├── 42_infrastructure.md      # インフラ技術標準
│           └── 45_secrets-management.md  # シークレット管理標準
│
├── .claude-state/              # プロジェクト状態（.gitignoreで除外）
│   ├── project-state.json     # プロジェクト状態
│   ├── tasks.json             # タスク管理
│   └── decisions.json         # 決定記録
│
├── docs/                       # 生成されるドキュメント（ユーザーが読む）
│   ├── 01_企画書.md
│   ├── 02_要件定義書.md
│   ├── 03_基本設計書.md
│   └── standards/             # プロジェクト固有の規約
│       ├── アプリケーション/   # アプリ開発規約
│       └── インフラ/          # インフラ構築規約
│
├── src/                        # 生成されるコード（アプリの場合）
│   └── ...
│
├── infra/                      # 生成されるインフラコード（インフラの場合）
│   └── ...
│
└── README.md                   # このファイル
```

## 使い方

### サブエージェントアーキテクチャ

aiDev は **PM（プロジェクトマネージャー）** として、専門サブエージェントに作業を委譲します。

#### 5つのコアサブエージェント

| サブエージェント | 役割 | 使用タイミング |
|----------------|------|--------------|
| **consultant** | ビジネス分析・提案 | 企画・要件定義フェーズ |
| **architect** | システム設計・技術選定 | 設計フェーズ |
| **coder** | コード実装・ユニットテスト | 実装フェーズ |
| **qa** | テスト設計・実行・品質評価 | テストフェーズ |
| **sre** | インフラ・デプロイ・性能テスト | 実装・テスト・納品フェーズ |

#### イテレーティブレビュープロセス

```
ユーザー（要望）
  ↓
PM（タスク委譲）
  ↓
サブエージェント（作業）
  ↓
PM（レビュー・品質チェック）← イテレーション1: PM内部レビュー
  ├─ NG → サブエージェント（修正）────┘
  ↓ OK
PM → ユーザー（ドラフト確認）
  ↓
ユーザー（フィードバック）← イテレーション2: ユーザーフィードバック
  ├─ 修正依頼 → PM → サブエージェント（修正）──┘
  ↓ 承認
最終成果物
```

**特徴**:
- PM が品質をチェックしてからユーザーに提示
- ユーザーのフィードバックを反映して改善
- 齟齬をなくして高品質な成果物を生成

#### サブエージェントの呼び出し方

**自動委任**（推奨）:
```
新しいECサイトを作りたいです
```
→ PM が自動的に適切なサブエージェント（consultant, architect等）を呼び出します

**明示的呼び出し**:
```
consultant サブエージェントを使ってビジネス分析してください
```

### 基本的な対話の流れ

1. **プロジェクト初期化（最初に実行）**
   ```
   /init
   ```
   - 必要な設定ファイルを読み込み
   - プロジェクト状態管理を開始
   - PM + サブエージェントが起動

2. **プロジェクト開始**
   ```
   test/sample-project-rfp.md の内容をコピペ

   （または）

   AWSでWebアプリケーション環境を構築したいです
   ```

3. **PM が質問してくる（一問一答）**
   ```
   PM: どのような業種・業態のビジネスですか？
   ```

4. **あなたが回答**
   ```
   EC事業です。既存のオンプレミス環境からの移行です。
   ```

5. **PM がサブエージェントに委譲**
   ```
   PM: consultant サブエージェントにビジネス分析を依頼します
   ```

6. **PM がレビュー・統合してユーザーに提示**
   - Consultant の分析結果を PM がレビュー
   - 「もっといい提案」があれば追加
   - ユーザー確認後、次フェーズへ

### カスタムコマンド

#### `/init` - プロジェクト初期化（最初に実行）
```
/init
```

**新規プロジェクト開始時、または既存プロジェクト再開時に実行してください。**

実行内容：
- `.claude/docs/00_core-principles.md` 等の必須ドキュメントを読み込み
- `.claude-state/` を作成（新規の場合）または読み込み（継続の場合）
- プロジェクト状態管理を開始
- AIファシリテーターの準備完了

#### `/status` - プロジェクト状況確認
```
/status
```

現在のフェーズ、完了項目、進行中項目、次にやるべきことを表示します。

#### `/next` - 次のアクション提案
```
/next
```

次に優先すべきアクションを1つ提案します。

### ユースケース例

#### 1. 新規AWS環境構築
```
新しいAWS環境にWebアプリケーションをデプロイしたいです。
```

→ AIがヒアリング → 要件定義 → 設計 → Terraform/CloudFormationコード生成 → CI/CD設定

#### 2. 既存インフラの改修
```
現在のAWS環境のコスト最適化をしたいです。
```

→ 現状分析 → 改善提案 → 設計変更 → IaC修正 → デプロイ戦略

#### 3. マイグレーション
```
オンプレミスからAWSに移行したいです。
```

→ 現行システム調査 → 移行戦略立案 → ターゲットアーキテクチャ設計 → 段階的移行計画

## AIの行動原則

### 1. 一問一答
複数の質問を同時にせず、1つずつ確認します。ユーザーが疲れないよう配慮します。

### 2. ビジネス背景優先
技術的な質問の前に、必ず「なぜ」を理解します：
- 業種・業態
- 現在の課題
- 開発・改修の理由

### 3. 確認前の振り返り
ドキュメントを提示する前に、会話を振り返って：
- 抜け漏れチェック
- 矛盾の確認
- より良い提案の検討

### 4. 安全性第一
- 本番環境への直接操作は行わない
- dry-run を必ず実施
- セキュリティベストプラクティスを適用
- シークレット情報はハードコードしない

### 5. 教育的な説明
コード生成時には、「なぜこの実装なのか」を説明し、ユーザーが学べるようにします。

## 技術標準

### 共通標準（全技術領域）
- 品質確保：保守可能なコード
- 安全性確保：セキュリティリスク最小化
- 一貫性維持：統一されたコーディング規約
- ベストプラクティス適用

### インフラ標準（AWS IaC）
- モジュール構成
- 環境分離（dev/stg/prod）
- 命名規則
- セキュリティ設定
- コスト最適化
- タグ戦略

詳細は [.claude/docs/40_standards/](.claude/docs/40_standards/) を参照。

## 対応する開発手法

- **ウォーターフォール**: 各フェーズを順番に完了
- **アジャイル**: 小さい単位でイテレーション
- **ハイブリッド**: 状況に応じて柔軟に対応

## 対応プロジェクトタイプ

### 現在サポート（Phase 1）
- AWS IaC構築・改修（Terraform/CloudFormation）
- インフラアーキテクチャ設計
- CI/CDパイプライン構築

### 将来対応（Phase 2以降）
- Webアプリケーション開発
- データベース設計・実装
- マイクロサービス構築
- Slack/Notion連携
- 自律的な運用監視・復旧

## トラブルシューティング

### AIが設定を読み込まない / 期待通りに動作しない
1. **まず `/init` コマンドを実行してください**
   ```
   /init
   ```
2. それでも解決しない場合：
   - VSCodeを再起動してください
   - `.claude/CLAUDE.md`が存在するか確認してください
   - `.claude/docs/00_core-principles.md`が存在するか確認してください

### プロジェクトの途中から始めたい / 状態がわからない
```
/status
```
現在のフェーズ、完了済み項目、次のアクションを確認できます。

### 状態がリセットされる
- `.claude-state/`ディレクトリは`.gitignore`で除外されています
- Git管理したい場合は、`.gitignore`から該当行を削除してください
- セッション開始時に `/init` を実行すると、既存の状態を読み込みます

### AIの応答が期待と異なる
- `/init`コマンドを実行して、設定を再読み込み
- `/status`コマンドで現在の状態を確認
- `.claude/docs/00_core-principles.md`を確認して行動原則を理解
- 具体的に「〇〇について確認してください」と指示

## 実運用フィードバックからの改善

### 改善1: 新規プロジェクト初期化問題の解決
- `scripts/init-new-project.sh`（Mac/Linux）と `scripts/init-new-project.bat`（Windows）を追加
- aiDev自体のドキュメント削除、git履歴クリーン、状態リセットを自動化

### 改善2: CloudFormation構造の明確化
- ネストスタック構造の標準化（`stack.yaml` + `nested/`）
- デプロイスクリプト提供（S3バケット自動作成、テンプレートアップロード）
- `.claude/docs/40_standards/42_infrastructure.md`に詳細を追記

### 改善3: 状態管理の自動化
- `.claude/helpers/state-manager.md`でプロジェクト状態の自動記録方法を定義
- フェーズ遷移、重要な決定、タスク発生時に自動更新

### 改善4: レビュータスク自動生成
- `.claude/helpers/review-task-generator.md`でドキュメント・コード生成後のレビュータスク自動生成方法を定義
- チェックリスト、承認フロー、修正フローを明確化

### 改善5: 必読ドキュメントの強制化
- `CLAUDE.md`冒頭に「会話開始時の必読事項」セクションを追加
- `.claude/docs/00_core-principles.md`等の読み込みを必須化

### 改善6: ドキュメント生成フローの体系化
- `.claude/docs/10_facilitation/15_document-generation-flow.md`でプロジェクト固有規約の生成フローを定義
- 要件→基本設計規約→詳細設計規約→コード規約→テスト設計規約の流れで一貫性確保

### 改善7: 開発プロセス規約の網羅
- `.claude/docs/10_facilitation/16_required-standards-checklist.md`で必要な規約を網羅的にリスト化
- 単体テスト、結合テスト、システムテスト、障害テスト、可用性テスト等を明確化

### 改善8: ドキュメントテンプレートの充実化
- `.claude/docs/30_templates/`にフェーズ別テンプレートを追加
- 受託開発納品レベルを基準に、プロジェクト規模に応じて調整可能に
- テンプレートカスタマイズヘルパー追加（`.claude/helpers/template-customization-helper.md`）
- ディレクトリ構成決定ヘルパー追加（`.claude/helpers/directory-structure-helper.md`）
- 画一的な構成を押し付けず、都度ベストプラクティスを調査

---

## ロードマップ

### Phase 1（現在）✅
- ローカルClaude Code環境での動作
- AWS IaC構築サポート
- 基本的な開発フェーズ管理
- プロジェクト固有規約の自動生成
- レビュータスク自動生成

### Phase 2（計画中）
- MCP Server統合
- Slack Bot連携（ユーザーがSlackから@AI呼び出し）
- Notion連携（タスク・進捗・課題管理）
- ステートレスコンテナ化（AWS ECS/Fargate）
- S3/DynamoDBによる外部状態管理

### Phase 3（構想）
- 24/7自律エージェント
- 運用監視・自動復旧
- マルチプロジェクト並行管理
- GitHub連携強化

## ライセンス

（ここにライセンス情報を記載）

## コントリビューション

（コントリビューションガイドラインを記載）

## サポート

質問や問題が発生した場合は、Issueを作成してください。