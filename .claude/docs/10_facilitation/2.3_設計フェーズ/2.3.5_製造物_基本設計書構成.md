# 2.3.5 製造物 - 基本設計書構成

## 目的

**基本設計書のテンプレート・記述方法**を提供します。

---

## 📋 基本設計書の目次構成

```markdown
# 基本設計書

## 1. はじめに
### 1.1 ドキュメント概要
### 1.2 対象読者
### 1.3 関連ドキュメント

## 2. システム概要
### 2.1 システム目的
### 2.2 システム機能概要
### 2.3 対象ユーザー

## 3. アーキテクチャ設計
### 3.1 アーキテクチャパターン
### 3.2 技術スタック選定理由
### 3.3 参照した技術標準（`.claude/docs/40_standards/`） ⭐⭐⭐
### 3.4 レイヤー構成
### 3.5 データフロー

## 4. システム構成図
### 4.1 全体構成図
### 4.2 ネットワーク構成図
### 4.3 コンポーネント配置図

## 5. データベース設計
### 5.1 ER図（詳細版）
### 5.2 テーブル一覧
### 5.3 インデックス戦略

## 6. API設計
### 6.1 API設計方針
### 6.2 認証・認可方式
### 6.3 エラーハンドリング方針

## 7. セキュリティ設計
### 7.1 認証設計
### 7.2 認可設計
### 7.3 データ暗号化
### 7.4 シークレット管理
### 7.5 監査ログ
### 7.6 `.claude/docs/40_standards/49_security.md` 準拠確認 ⭐⭐⭐

## 8. 運用設計
### 8.1 監視設計
### 8.2 ログ設計
### 8.3 バックアップ設計
### 8.4 障害復旧設計（RTO/RPO）

## 9. インフラ設計
### 9.1 クラウドベンダー選定理由
### 9.2 ネットワーク設計
### 9.3 コンピューティング設計
### 9.4 ストレージ設計
### 9.5 `.claude/docs/40_standards/45_cloudformation.md`/4.4 準拠確認 ⭐

## 10. 非機能要件への対応
### 10.1 性能要件への対応
### 10.2 可用性要件への対応
### 10.3 セキュリティ要件への対応
### 10.4 運用要件への対応
```

---

## 📝 各セクションの記述方法

### 3.3 参照した技術標準（`.claude/docs/40_standards/`） ⭐⭐⭐

**記載例:**
```markdown
## 3.3 参照した技術標準（`.claude/docs/40_standards/`）

### 4.6 Node.js/TypeScript規約
- ディレクトリ構成: 技術標準に準拠
- linter: ESLint（技術標準推奨設定）
- formatter: Prettier（技術標準推奨設定）

### 4.9 セキュリティ・運用基準 ⭐⭐⭐
- 認証: JWT + bcrypt（技術標準推奨）
- 暗号化: TLS 1.3 + AES-256（技術標準推奨）
- シークレット管理: AWS Secrets Manager（技術標準推奨）
```

---

## 📁 ファイル分割の推奨

### 小規模プロジェクトの場合（推定300行以内）

```
docs/03_基本設計書.md      # 1ファイルでOK
```

### 中〜大規模プロジェクトの場合（推定300行超）

**推奨：# 見出し1（セクション）ごとにファイル分割**

```
docs/03_基本設計書/
├── README.md               # 目次・ナビゲーション
├── 00_概要.md              # はじめに、システム概要（短いため1ファイル）
├── 01_アーキテクチャ設計.md
├── 02_システム構成図.md
├── 03_データベース設計.md
├── 04_API設計.md
├── 05_セキュリティ設計.md
├── 06_運用設計.md
├── 07_インフラ設計.md
└── 08_非機能要件対応.md
```

**理由:**
- ✅ 1ファイルあたり100〜300行程度に抑えられる
- ✅ セクションごとに独立して編集・レビュー可能
- ✅ Git差分が見やすい
- ✅ 複数人で並行作業しやすい

### ディレクトリ構成の例

```
docs/
├── 01_企画書.md
├── 02_要件定義書.md
├── 03_基本設計書/          # ディレクトリ化
│   ├── README.md           # 目次・ナビゲーション
│   ├── 00_概要.md
│   ├── 01_アーキテクチャ設計.md
│   ├── 02_システム構成図.md
│   ├── 03_データベース設計.md
│   ├── 04_API設計.md
│   ├── 05_セキュリティ設計.md
│   ├── 06_運用設計.md
│   ├── 07_インフラ設計.md
│   └── 08_非機能要件対応.md
└── 04_詳細設計書/
    └── ...
```

### README.md の例（ナビゲーション）

```markdown
# 基本設計書

## 目次

1. [概要](./00_概要.md) - はじめに、システム概要
2. [アーキテクチャ設計](./01_アーキテクチャ設計.md) - アーキテクチャパターン、技術スタック
3. [システム構成図](./02_システム構成図.md) - 全体構成、ネットワーク構成
4. [データベース設計](./03_データベース設計.md) - ER図、テーブル一覧
5. [API設計](./04_API設計.md) - API設計方針、認証・認可
6. [セキュリティ設計](./05_セキュリティ設計.md) - 認証、暗号化、シークレット管理
7. [運用設計](./06_運用設計.md) - 監視、ログ、バックアップ、障害復旧
8. [インフラ設計](./07_インフラ設計.md) - ネットワーク、コンピューティング、ストレージ
9. [非機能要件対応](./08_非機能要件対応.md) - 性能、可用性、運用要件
```

### 判断基準

| プロジェクト規模 | ファイル構成 | 理由 |
|------------|----------|------|
| 小規模（〜300行） | 1ファイル | シンプル、管理しやすい |
| 中規模（300〜1000行） | セクション分割 | レビューしやすい、並行作業可能 |
| 大規模（1000行〜） | セクション分割 + サブセクション分割 | 必須（1ファイルでは管理不可能） |

### 設計書生成時の推奨フロー

1. **最初は1ファイルで生成**（`docs/03_基本設計書.md`）
2. **内容を確認**
   - 各セクションの内容が十分に詳細か確認
   - レビューしやすいか確認
3. **ファイル分割の判断**
   - セクションごとの内容が独立しているか確認
   - 分割するメリットがあるか確認
4. **ファイル分割実施**（必要に応じて）
   - ディレクトリ作成: `docs/03_基本設計書/`
   - セクションごとに分割
   - README.md でナビゲーション提供

---

**作成日**: 2025-10-19
**更新日**: 2025-10-22（ファイル分割推奨を追加）
**対象フェーズ**: 設計
**重要度**: ⭐⭐⭐ 必須
