# 2.4.5.1.6 Good_Bad_Example集（Python）

## 📋 目的

Pythonコードのgood/bad exampleを集約

---

## 1. 型ヒント

### ✅ Good Example
```python
from typing import Any

def get_user(user_id: int) -> dict[str, Any]:
    """ユーザー情報を取得する
    
    Args:
        user_id: ユーザーID
        
    Returns:
        ユーザー情報を含む辞書
    """
    return {"id": user_id, "name": "Taro"}
```

### ❌ Bad Example
```python
def get_user(user_id):
    return {"id": user_id, "name": "Taro"}
```

---

## 2. エラーハンドリング

### ✅ Good Example
```python
import logging
logger = logging.getLogger(__name__)

def process_data(data: dict) -> dict:
    try:
        result = risky_operation(data)
        return result
    except ValueError as e:
        logger.error(f"データ処理エラー: {e}")
        raise
```

### ❌ Bad Example
```python
def process_data(data):
    try:
        result = risky_operation(data)
        return result
    except:  # 広すぎる
        pass  # 握りつぶし
```

---

## 3. シークレット管理

### ✅ Good Example
```python
import os

DB_PASSWORD = os.environ.get("DB_PASSWORD")
if DB_PASSWORD is None:
    raise ValueError("DB_PASSWORD環境変数が設定されていません")
```

### ❌ Bad Example
```python
DB_PASSWORD = "my_secret_password"  # ハードコード
```

---

## 4. docstring

### ✅ Good Example
```python
def calculate_total(prices: list[int]) -> int:
    """商品価格の合計を計算する
    
    Args:
        prices: 商品価格のリスト
        
    Returns:
        合計金額
        
    Raises:
        ValueError: 価格リストが空の場合
    """
    if not prices:
        raise ValueError("価格リストが空です")
    return sum(prices)
```

### ❌ Bad Example
```python
def calculate_total(prices):
    # 合計計算
    return sum(prices)
```

---

## 5. テストコード

### ✅ Good Example
```python
import pytest

def test_calculate_total_正常系():
    """合計計算の正常系テスト"""
    # Arrange
    prices = [100, 200, 300]
    
    # Act
    result = calculate_total(prices)
    
    # Assert
    assert result == 600

def test_calculate_total_異常系_空リスト():
    """合計計算の異常系テスト（空リスト）"""
    with pytest.raises(ValueError):
        calculate_total([])
```

### ❌ Bad Example
```python
def test_calculate():
    assert calculate_total([100, 200]) == 300
```

---

**最終更新**: 2025-10-19
