# 2.4.6.1.6 Good_Bad_Example集（CloudFormation）

## 📋 目的

CloudFormationテンプレートのgood/bad exampleを集約

---

## 1. 論理ID命名

### ✅ Good Example
```yaml
Resources:
  VpcMain:  # PascalCase, 英数字のみ
    Type: AWS::EC2::VPC
    Properties:
      Tags:
        - Key: Name
          Value: メインVPC  # 日本語OK（Tagsのみ）
```

### ❌ Bad Example
```yaml
Resources:
  メインVPC:  # 日本語（NG）
    Type: AWS::EC2::VPC
```

---

## 2. パラメータ管理

### ✅ Good Example
```yaml
Parameters:
  Environment:
    Type: String
    Default: dev
    AllowedValues:
      - dev
      - stg
      - prod

Resources:
  Ec2WebServer:
    Type: AWS::EC2::Instance
    Properties:
      InstanceType: !If
        - IsProd
        - t3.medium
        - t3.micro
```

### ❌ Bad Example
```yaml
Resources:
  Ec2WebServer:
    Type: AWS::EC2::Instance
    Properties:
      InstanceType: t3.micro  # ハードコード
```

---

## 3. セキュリティ

### ✅ Good Example
```yaml
Resources:
  WebServerSG:
    Type: AWS::EC2::SecurityGroup
    Properties:
      SecurityGroupIngress:
        - IpProtocol: tcp
          FromPort: 443
          ToPort: 443
          CidrIp: 0.0.0.0/0  # HTTPS only
```

### ❌ Bad Example
```yaml
Resources:
  WebServerSG:
    Type: AWS::EC2::SecurityGroup
    Properties:
      SecurityGroupIngress:
        - IpProtocol: -1  # 全開放（NG）
          CidrIp: 0.0.0.0/0
```

---

## 4. モジュール分割

### ✅ Good Example
```
infra/
├── network.yaml      # VPC, Subnet, IGW
├── security.yaml     # SecurityGroup
├── compute.yaml      # EC2
└── database.yaml     # RDS
```

### ❌ Bad Example
```
infra/
└── all.yaml  # 全部1ファイル（巨大化）
```

---

## 5. コメント

### ✅ Good Example
```yaml
Resources:
  # メインVPC（CIDR: 10.0.0.0/16）
  VpcMain:
    Type: AWS::EC2::VPC
    Properties:
      CidrBlock: 10.0.0.0/16
```

### ❌ Bad Example
```yaml
Resources:
  VpcMain:  # コメントなし
    Type: AWS::EC2::VPC
    Properties:
      CidrBlock: 10.0.0.0/16
```

---

**最終更新**: 2025-10-19
