# 2.4.6.1.4 Change Setsé‹ç”¨ãƒ•ãƒ­ãƒ¼ï¼ˆCloudFormationï¼‰

## ğŸ“‹ ç›®çš„

CloudFormationã®Change Setsã‚’ä½¿ã£ãŸå®‰å…¨ãªãƒ‡ãƒ—ãƒ­ã‚¤ãƒ•ãƒ­ãƒ¼

---

## ğŸ”„ Change Setsé‹ç”¨ãƒ•ãƒ­ãƒ¼

### ã‚¹ãƒ†ãƒƒãƒ—1: Change Setä½œæˆ

```bash
aws cloudformation create-change-set \
  --stack-name my-stack \
  --change-set-name my-changeset-$(date +%Y%m%d%H%M%S) \
  --template-body file://template.yaml \
  --parameters file://parameters.json \
  --capabilities CAPABILITY_IAM
```

---

### ã‚¹ãƒ†ãƒƒãƒ—2: Change Setå†…å®¹ç¢ºèª â­â­â­æœ€é‡è¦

```bash
aws cloudformation describe-change-set \
  --stack-name my-stack \
  --change-set-name my-changeset-20251019120000
```

**ç¢ºèªé …ç›®:**
- [ ] å¤‰æ›´ã•ã‚Œã‚‹ãƒªã‚½ãƒ¼ã‚¹
- [ ] å‰Šé™¤ã•ã‚Œã‚‹ãƒªã‚½ãƒ¼ã‚¹ï¼ˆâ—æ³¨æ„ï¼‰
- [ ] æ–°è¦ä½œæˆã•ã‚Œã‚‹ãƒªã‚½ãƒ¼ã‚¹
- [ ] æƒ³å®šå¤–ã®å¤‰æ›´ãŒãªã„ã‹

---

### ã‚¹ãƒ†ãƒƒãƒ—3: ãƒ¦ãƒ¼ã‚¶ãƒ¼æ‰¿èªã‚’å¾—ã‚‹

```
AI: Change Setã‚’ä½œæˆã—ã¾ã—ãŸã€‚ä»¥ä¸‹ã®å¤‰æ›´ãŒè¡Œã‚ã‚Œã¾ã™ï¼š

[è¿½åŠ ]
- EC2ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹: WebServer01
- SecurityGroup: WebServerSG

[å¤‰æ›´]
- RDS: ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚¿ã‚¤ãƒ—ã‚’ t3.micro â†’ t3.small ã«å¤‰æ›´

[å‰Šé™¤]
- ãªã—

æƒ³å®šé€šã‚Šã§ã—ã‚‡ã†ã‹ï¼Ÿå•é¡Œãªã‘ã‚Œã°ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¾ã™ã€‚
```

---

### ã‚¹ãƒ†ãƒƒãƒ—4: Change Setå®Ÿè¡Œ

```bash
# ãƒ¦ãƒ¼ã‚¶ãƒ¼æ‰¿èªå¾Œ
aws cloudformation execute-change-set \
  --stack-name my-stack \
  --change-set-name my-changeset-20251019120000
```

---

### ã‚¹ãƒ†ãƒƒãƒ—5: ãƒ‡ãƒ—ãƒ­ã‚¤çµæœç¢ºèª

```bash
aws cloudformation describe-stacks \
  --stack-name my-stack \
  --query 'Stacks[0].StackStatus'
```

**æœŸå¾…å€¤:** `UPDATE_COMPLETE`

---

## âš ï¸ æ³¨æ„äº‹é …

### å‰Šé™¤ç³»ã®å¤‰æ›´ã¯ç‰¹ã«æ³¨æ„

Change Setã§ä»¥ä¸‹ãŒè¡¨ç¤ºã•ã‚ŒãŸå ´åˆã¯**å¿…ãšãƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç¢ºèª**ï¼š

- **Deleteï¼ˆå‰Šé™¤ï¼‰**: ãƒªã‚½ãƒ¼ã‚¹ãŒå‰Šé™¤ã•ã‚Œã‚‹
- **Replacement=True**: ãƒªã‚½ãƒ¼ã‚¹ãŒä½œã‚Šç›´ã•ã‚Œã‚‹ï¼ˆãƒ‡ãƒ¼ã‚¿æ¶ˆå¤±ã®å¯èƒ½æ€§ï¼‰

---

## âœ… ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] Change Setä½œæˆ
- [ ] Change Setå†…å®¹ç¢ºèª
- [ ] å‰Šé™¤ãƒ»ç½®æ›ãŒãªã„ã‹ç¢ºèª
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼æ‰¿èªå–å¾—
- [ ] Change Setå®Ÿè¡Œ
- [ ] ãƒ‡ãƒ—ãƒ­ã‚¤çµæœç¢ºèª

---

**æœ€çµ‚æ›´æ–°**: 2025-10-19
